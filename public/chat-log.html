<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat Log ‚Ä¢ Event Bridge</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="chat-log-body">
    <main class="container chat-log-container">
      <header class="chat-log-header">
        <div>
          <h1>Chat Konsole</h1>
          <p class="section-intro">
            Beobachte alle eintreffenden Nachrichten in Echtzeit und verschicke Antworten mit deinem
            konfigurierten Bot-Konto.
          </p>
        </div>
        <a class="nav-link" href="index.html">Zur√ºck zur Konfiguration</a>
      </header>

      <section class="chat-console-card">
        <header class="section-header">
          <div>
            <h2>Live Log</h2>
            <p class="section-subtitle">Die Konsole zeigt Twitch IRC Ereignisse unmittelbar nach ihrem Eingang.</p>
          </div>
          <span class="status-chip status-chip--disconnected" id="chat-connection-chip">Offline</span>
        </header>
        <div
          class="chat-console"
          id="chat-console"
          role="log"
          aria-live="polite"
          aria-busy="true"
          aria-label="Live Chat Konsole"
        ></div>
        <div class="chat-console-actions">
          <button type="button" id="clear-log" class="ghost-button">Konsole leeren</button>
          <span class="status-message" id="chat-status" role="status" aria-live="polite"></span>
        </div>
      </section>

      <section class="chat-send-card">
        <header class="section-header">
          <div>
            <h2>Nachrichten senden</h2>
            <p class="section-subtitle">
              Antworten werden automatisch unter deinem Bot-Benutzernamen ver√∂ffentlicht.
            </p>
          </div>
          <button type="button" class="ghost-button" id="reload-identity">Konfiguration neu laden</button>
        </header>
        <p class="form-hint">
          Aktives Konto:
          <strong id="chat-identity">Keine Twitch Konfiguration gefunden</strong>.
          Die Daten stammen aus der <a href="index.html">Twitch Schnittstelle</a>.
        </p>
        <form id="chat-send-form" autocomplete="off">
          <input type="hidden" id="chat-username" name="username" />
          <div class="form-row">
            <label for="chat-message">Nachricht</label>
            <input
              id="chat-message"
              name="message"
              placeholder="Hallo Chat üëã"
              maxlength="500"
              required
            />
          </div>
          <div class="form-actions">
            <button type="submit" id="send-button">Nachricht senden</button>
            <button type="button" class="secondary-button" id="preview-test">Testeintrag simulieren</button>
          </div>
        </form>
      </section>

      <section class="chat-hints">
        <h2>Tipps f√ºr die Integration</h2>
        <ul class="helper-list">
          <li>
            Stelle sicher, dass der Bot-Account in der Twitch Konfiguration mit einem g√ºltigen OAuth Token
            versehen ist. Der Token ben√∂tigt mindestens den Scope <code>chat:read</code> und
            <code>chat:edit</code>.
          </li>
          <li>
            Ein externer Prozess kann Nachrichten an <code>POST /api/chat/message</code> schicken, um die
            Konsole zu bef√ºllen. Diese Seite verbindet sich per Server-Sent Events mit
            <code>/api/chat/stream</code>.
          </li>
          <li>
            √úber <code>DELETE /api/chat</code> lassen sich alle Log-Eintr√§ge synchron l√∂schen ‚Äì n√ºtzlich f√ºr
            den Start eines neuen Streams.
          </li>
        </ul>
      </section>
    </main>

    <script src="chat-log.js"></script>
  </body>
</html>
